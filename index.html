<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Nerdix Pulse | Pure Focus</title>
    <link href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@400;500;700&family=JetBrains+Mono:wght@400&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg: #0F1113;             
            --card-bg: #1A1D21;        
            --border: #262A30;         
            --text-main: #F3F4F6;      
            --text-dim: #6B7280;       
            --accent: #FFFFFF;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Ubuntu', sans-serif; -webkit-font-smoothing: antialiased; touch-action: manipulation; }
        body { background: var(--bg); color: var(--text-main); height: 100vh; width: 100vw; overflow: hidden; }

        /* HEADER OPTIMIZATION */
        .brand-header { 
            text-align: center; 
            margin-top: -10px; /* Tarik sedikit ke atas */
            margin-bottom: 4px; /* Kecilkan jarak bawah */
        }
        .brand-header h1 { 
            font-size: 1.25rem; /* Sedikit dikecilkan agar aman */
            font-weight: 700; 
            letter-spacing: -0.5px; 
            background: linear-gradient(to bottom, #FFFFFF, #6B7280); 
            -webkit-background-clip: text; 
            -webkit-text-fill-color: transparent; 
        }

        .nav-bar { position: fixed; top: 12px; left: 50%; transform: translateX(-50%); z-index: 1000; background: var(--card-bg); padding: 4px; border-radius: 20px; border: 1px solid var(--border); display: flex; gap: 4px; }
        .nav-btn { padding: 6px 14px; border-radius: 16px; border: none; color: var(--text-dim); background: transparent; font-size: 0.65rem; font-weight: 700; cursor: pointer; transition: 0.3s; }
        .nav-btn.active { background: var(--accent); color: var(--bg); }
        .nav-btn.soon { opacity: 0.4; font-style: italic; }
        
        .app-shell { height: 100vh; padding: 75px 16px 20px; max-width: 420px; margin: 0 auto; display: flex; flex-direction: column; gap: 12px; }
        .card { width: 100%; background: var(--card-bg); border: 1px solid var(--border); border-radius: 24px; padding: 20px; position: relative; overflow: hidden; }
        
        .timer-scroller { display: flex; justify-content: center; align-items: center; gap: 8px; padding: 15px 0; user-select: none; }
        .unit-box { position: relative; height: 95px; width: 70px; display: flex; flex-direction: column; align-items: center; justify-content: center; cursor: ns-resize; }
        .digit { font-family: 'JetBrains Mono', monospace; font-size: 2.8rem; font-weight: 400; color: var(--text-main); z-index: 2; }
        .ghost { position: absolute; font-family: 'JetBrains Mono', monospace; font-size: 1.2rem; color: var(--text-dim); opacity: 0.1; }
        .separator { font-family: 'JetBrains Mono', monospace; font-size: 1.5rem; color: var(--text-dim); padding-bottom: 8px; opacity: 0.3; }
        .unit-label { font-size: 0.5rem; color: var(--text-dim); position: absolute; bottom: -2px; font-weight: 700; letter-spacing: 1px; }

        .mood-selector { display: flex; justify-content: space-around; margin-top: 10px; background: var(--bg); padding: 10px; border-radius: 18px; border: 1px solid var(--border); }
        .mood-btn { background: none; border: none; font-size: 1.1rem; cursor: pointer; opacity: 0.3; transition: 0.3s; filter: grayscale(1); }
        .mood-btn.active { opacity: 1; filter: grayscale(0); transform: scale(1.1); }
        .vibe-label { font-size: 0.6rem; color: var(--text-dim); margin-top: 6px; font-weight: 500; text-align: center; }

        .btn-main { width: 100%; padding: 18px; border-radius: 20px; border: none; font-size: 0.9rem; font-weight: 700; background: var(--accent); color: var(--bg); cursor: pointer; transition: 0.2s; }

        #soon-toast { position: fixed; bottom: 30px; left: 50%; transform: translateX(-50%) translateY(100px); background: var(--accent); color: var(--bg); padding: 10px 20px; border-radius: 50px; font-size: 0.7rem; font-weight: 700; z-index: 10000; transition: 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275); }
        #soon-toast.show { transform: translateX(-50%) translateY(0); }
        #finish-notice { position: absolute; inset: 0; background: var(--card-bg); display: none; flex-direction: column; align-items: center; justify-content: center; z-index: 10; padding: 20px; text-align: center; }
        .tag-status { font-size: 0.5rem; font-weight: 700; padding: 4px 10px; border-radius: 8px; background: var(--bg); border: 1px solid var(--border); color: var(--text-dim); }
    </style>
</head>
<body>

    <div id="lofi-player" style="position: absolute; width: 0; height: 0; opacity: 0; pointer-events: none;"></div>
    <div id="soon-toast">Fitur PRO sedang disiapkan ‚ú®</div>

    <nav class="nav-bar">
        <button class="nav-btn active">FOKUS</button>
        <button class="nav-btn soon" onclick="showSoon()">SOON üîí</button>
    </nav>

    <div class="app-shell">
        <div class="brand-header"><h1>Nerdix Pulse</h1></div>

        <div class="card">
            <div style="display:flex; justify-content:space-between; align-items:center;">
                <span style="font-size: 0.55rem; font-weight: 700; color: var(--text-dim); letter-spacing: 1px;">KOMITMEN HARI INI</span>
                <span id="day-status" class="tag-status">REHAT</span>
            </div>
            <p id="integrity-info" style="font-size: 0.7rem; color: var(--text-dim); margin-top: 6px;">Atur durasi & vibe untuk mulai.</p>
        </div>

        <main class="card">
            <div id="finish-notice">
                <span style="font-size: 2rem; margin-bottom: 10px;">üëè</span>
                <b style="font-size: 1.1rem; font-weight: 700;">Respect, Selesai!</b>
                <p id="quote-display" style="font-size: 0.75rem; color: var(--text-dim); margin: 8px 0 20px; line-height: 1.4;"></p>
                <button class="btn-main" onclick="closeFinishNotice()" style="width: auto; padding: 10px 25px;">Mulai Lagi</button>
            </div>

            <div style="text-align: center;">
                <span style="font-size: 0.55rem; font-weight: 700; color: var(--text-dim); letter-spacing: 1px;">PILIH SUARA LATAR</span>
                <div class="mood-selector">
                    <button class="mood-btn active" onclick="setMood('lofi', this, 'Musik Chill Lofi')">‚òï</button>
                    <button class="mood-btn" onclick="setMood('rain', this, 'Suara Hujan Tenang')">üåßÔ∏è</button>
                    <button class="mood-btn" onclick="setMood('space', this, 'Vibe Luar Angkasa')">üåå</button>
                    <button class="mood-btn" onclick="setMood('forest', this, 'Suara Alam & Hutan')">üçÉ</button>
                </div>
                <p id="vibe-text" class="vibe-label">Musik Chill Lofi</p>
            </div>

            <div class="timer-scroller">
                <div class="unit-box" onwheel="handleWheel(event, 'h')" ontouchstart="handleTouchStart(event)" ontouchmove="handleTouchMove(event, 'h')">
                    <span class="ghost ghost-up" id="h-up">01</span>
                    <span class="digit" id="h-val">00</span>
                    <span class="ghost ghost-down" id="h-down">23</span>
                    <span class="unit-label">JAM</span>
                </div>
                <span class="separator">:</span>
                <div class="unit-box" onwheel="handleWheel(event, 'm')" ontouchstart="handleTouchStart(event)" ontouchmove="handleTouchMove(event, 'm')">
                    <span class="ghost ghost-up" id="m-up">01</span>
                    <span class="digit" id="m-val">00</span>
                    <span class="ghost ghost-down" id="m-down">59</span>
                    <span class="unit-label">MENIT</span>
                </div>
                <span class="separator">:</span>
                <div class="unit-box" onwheel="handleWheel(event, 's')" ontouchstart="handleTouchStart(event)" ontouchmove="handleTouchMove(event, 's')">
                    <span class="ghost ghost-up" id="s-up">01</span>
                    <span class="digit" id="s-val">00</span>
                    <span class="ghost ghost-down" id="s-down">59</span>
                    <span class="unit-label">DETIK</span>
                </div>
            </div>

            <button class="btn-main" id="start-btn" onclick="initStart()">MULAI SEKARANG</button>
            <div id="running-controls" style="display: none; margin-top: 8px;">
                <button onclick="handleStop()" style="width:100%; background:none; border:1px solid var(--border); color:var(--text-dim); padding:15px; border-radius:18px; font-weight:700; font-size:0.75rem; cursor:pointer;">Berhenti Awal</button>
            </div>
        </main>
    </div>

    <script>
        // Logika teknis tetap sama (dengan Fade Out)
        let h = 0, m = 0, s = 0;
        let timer = null, player, isRunning = false, startY = 0;
        let currentVibe = 'oPVte6aMprI';

        const vibes = { 'lofi': 'oPVte6aMprI', 'rain': 'mPZkdNF6J7U', 'space': 'm86mBRKZHY0', 'forest': 'xNN7iTaiz78' };
        const quotes = [ "Fokus itu pilihan, dan lo baru aja memilihnya.", "Bukan soal durasi, tapi soal konsistensi.", "Hp ditaruh, masa depan dijemput. Keren!", "Satu langkah lebih dekat ke impian lo.", "Tarik napas. Lo udah lakuin yang terbaik." ];

        function showSoon() {
            const toast = document.getElementById('soon-toast');
            toast.classList.add('show');
            setTimeout(() => toast.classList.remove('show'), 3000);
        }

        function fadeOutAudio(callback) {
            if (!player) return callback();
            let vol = player.getVolume();
            let fadeInterval = setInterval(() => {
                if (vol > 0) { vol -= 5; player.setVolume(vol); } 
                else { clearInterval(fadeInterval); player.pauseVideo(); player.setVolume(100); callback(); }
            }, 100);
        }

        function setMood(type, btn, label) {
            if(isRunning) return;
            currentVibe = vibes[type];
            document.querySelectorAll('.mood-btn').forEach(b => b.classList.remove('active'));
            btn.classList.add('active');
            document.getElementById('vibe-text').innerText = label;
            if(player) { player.loadVideoById(currentVibe); player.pauseVideo(); }
        }

        function handleWheel(e, unit) { if(!isRunning) changeValue(unit, e.deltaY < 0 ? 1 : -1); }
        function handleTouchStart(e) { if(!isRunning) startY = e.touches[0].clientY; }
        function handleTouchMove(e, unit) {
            if(isRunning) return;
            const currentY = e.touches[0].clientY;
            const diff = startY - currentY;
            if (Math.abs(diff) > 25) { changeValue(unit, diff > 0 ? 1 : -1); startY = currentY; }
        }
        function changeValue(unit, delta) {
            if(unit === 'h') h = (h + delta + 24) % 24;
            if(unit === 'm') m = (m + delta + 60) % 60;
            if(unit === 's') s = (s + delta + 60) % 60;
            updateDisplay();
        }
        function updateDisplay() {
            document.getElementById('h-val').innerText = h.toString().padStart(2, '0');
            document.getElementById('m-val').innerText = m.toString().padStart(2, '0');
            document.getElementById('s-val').innerText = s.toString().padStart(2, '0');
            document.getElementById('h-up').innerText = ((h + 1) % 24).toString().padStart(2, '0');
            document.getElementById('h-down').innerText = ((h - 1 + 24) % 24).toString().padStart(2, '0');
            document.getElementById('m-up').innerText = ((m + 1) % 60).toString().padStart(2, '0');
            document.getElementById('m-down').innerText = ((m - 1 + 60) % 60).toString().padStart(2, '0');
            document.getElementById('s-up').innerText = ((s + 1) % 60).toString().padStart(2, '0');
            document.getElementById('s-down').innerText = ((s - 1 + 60) % 60).toString().padStart(2, '0');
        }

        function initStart() {
            let totalSec = (h * 3600) + (m * 60) + s;
            if(totalSec <= 0) return;
            isRunning = true;
            document.getElementById('start-btn').style.display = 'none';
            document.getElementById('running-controls').style.display = 'block';
            document.querySelectorAll('.ghost').forEach(g => g.style.display = 'none');
            document.getElementById('day-status').innerText = "FOKUS";
            if(player) { player.setVolume(100); player.playVideo(); }
            timer = setInterval(() => {
                if(totalSec > 0) {
                    totalSec--; h = Math.floor(totalSec / 3600); m = Math.floor((totalSec % 3600) / 60); s = totalSec % 60; updateDisplay();
                } else { finishSession(); }
            }, 1000);
        }

        function handleStop() { clearInterval(timer); fadeOutAudio(() => { resetUI(); }); }
        function finishSession() { clearInterval(timer); fadeOutAudio(() => { isRunning = false; document.getElementById('quote-display').innerText = quotes[Math.floor(Math.random() * quotes.length)]; document.getElementById('finish-notice').style.display = 'flex'; }); }
        function closeFinishNotice() { document.getElementById('finish-notice').style.display = 'none'; resetUI(); }
        function resetUI() { isRunning = false; h = 0; m = 0; s = 0; document.getElementById('start-btn').style.display = 'block'; document.getElementById('running-controls').style.display = 'none'; document.querySelectorAll('.ghost').forEach(g => g.style.display = 'block'); updateDisplay(); document.getElementById('day-status').innerText = "REHAT"; }

        var tag = document.createElement('script');
        tag.src = "https://www.youtube.com/iframe_api";
        var firstScriptTag = document.getElementsByTagName('script')[0];
        firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);
        function onYouTubeIframeAPIReady() {
            player = new YT.Player('lofi-player', {
                height: '0', width: '0', videoId: currentVibe,
                playerVars: { 'autoplay': 0, 'controls': 0, 'loop': 1, 'playlist': currentVibe }
            });
        }
        window.onload = updateDisplay;
    </script>
</body>
</html>
